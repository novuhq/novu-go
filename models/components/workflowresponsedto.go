// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/novuhq/novu-go/internal/utils"
)

// WorkflowResponseDtoUpdatedBy - User who last updated the workflow
type WorkflowResponseDtoUpdatedBy struct {
	// User ID
	ID string `json:"_id"`
	// User first name
	FirstName *string `json:"firstName,omitempty"`
	// User last name
	LastName *string `json:"lastName,omitempty"`
	// User external ID
	ExternalID *string `json:"externalId,omitempty"`
}

func (w *WorkflowResponseDtoUpdatedBy) GetID() string {
	if w == nil {
		return ""
	}
	return w.ID
}

func (w *WorkflowResponseDtoUpdatedBy) GetFirstName() *string {
	if w == nil {
		return nil
	}
	return w.FirstName
}

func (w *WorkflowResponseDtoUpdatedBy) GetLastName() *string {
	if w == nil {
		return nil
	}
	return w.LastName
}

func (w *WorkflowResponseDtoUpdatedBy) GetExternalID() *string {
	if w == nil {
		return nil
	}
	return w.ExternalID
}

// LastPublishedBy - User who last published the workflow
type LastPublishedBy struct {
	// User ID
	ID string `json:"_id"`
	// User first name
	FirstName *string `json:"firstName,omitempty"`
	// User last name
	LastName *string `json:"lastName,omitempty"`
	// User external ID
	ExternalID *string `json:"externalId,omitempty"`
}

func (l *LastPublishedBy) GetID() string {
	if l == nil {
		return ""
	}
	return l.ID
}

func (l *LastPublishedBy) GetFirstName() *string {
	if l == nil {
		return nil
	}
	return l.FirstName
}

func (l *LastPublishedBy) GetLastName() *string {
	if l == nil {
		return nil
	}
	return l.LastName
}

func (l *LastPublishedBy) GetExternalID() *string {
	if l == nil {
		return nil
	}
	return l.ExternalID
}

type WorkflowResponseDtoStepsType string

const (
	WorkflowResponseDtoStepsTypeInApp    WorkflowResponseDtoStepsType = "in_app"
	WorkflowResponseDtoStepsTypeEmail    WorkflowResponseDtoStepsType = "email"
	WorkflowResponseDtoStepsTypeSms      WorkflowResponseDtoStepsType = "sms"
	WorkflowResponseDtoStepsTypePush     WorkflowResponseDtoStepsType = "push"
	WorkflowResponseDtoStepsTypeChat     WorkflowResponseDtoStepsType = "chat"
	WorkflowResponseDtoStepsTypeDelay    WorkflowResponseDtoStepsType = "delay"
	WorkflowResponseDtoStepsTypeDigest   WorkflowResponseDtoStepsType = "digest"
	WorkflowResponseDtoStepsTypeCustom   WorkflowResponseDtoStepsType = "custom"
	WorkflowResponseDtoStepsTypeThrottle WorkflowResponseDtoStepsType = "throttle"
)

type WorkflowResponseDtoSteps struct {
	InAppStepResponseDto    *InAppStepResponseDto    `queryParam:"inline,name=steps"`
	EmailStepResponseDto    *EmailStepResponseDto    `queryParam:"inline,name=steps"`
	SmsStepResponseDto      *SmsStepResponseDto      `queryParam:"inline,name=steps"`
	PushStepResponseDto     *PushStepResponseDto     `queryParam:"inline,name=steps"`
	ChatStepResponseDto     *ChatStepResponseDto     `queryParam:"inline,name=steps"`
	DelayStepResponseDto    *DelayStepResponseDto    `queryParam:"inline,name=steps"`
	DigestStepResponseDto   *DigestStepResponseDto   `queryParam:"inline,name=steps"`
	CustomStepResponseDto   *CustomStepResponseDto   `queryParam:"inline,name=steps"`
	ThrottleStepResponseDto *ThrottleStepResponseDto `queryParam:"inline,name=steps"`

	Type WorkflowResponseDtoStepsType
}

func CreateWorkflowResponseDtoStepsInApp(inApp InAppStepResponseDto) WorkflowResponseDtoSteps {
	typ := WorkflowResponseDtoStepsTypeInApp

	typStr := StepTypeEnum(typ)
	inApp.Type = typStr

	return WorkflowResponseDtoSteps{
		InAppStepResponseDto: &inApp,
		Type:                 typ,
	}
}

func CreateWorkflowResponseDtoStepsEmail(email EmailStepResponseDto) WorkflowResponseDtoSteps {
	typ := WorkflowResponseDtoStepsTypeEmail

	typStr := StepTypeEnum(typ)
	email.Type = typStr

	return WorkflowResponseDtoSteps{
		EmailStepResponseDto: &email,
		Type:                 typ,
	}
}

func CreateWorkflowResponseDtoStepsSms(sms SmsStepResponseDto) WorkflowResponseDtoSteps {
	typ := WorkflowResponseDtoStepsTypeSms

	typStr := StepTypeEnum(typ)
	sms.Type = typStr

	return WorkflowResponseDtoSteps{
		SmsStepResponseDto: &sms,
		Type:               typ,
	}
}

func CreateWorkflowResponseDtoStepsPush(push PushStepResponseDto) WorkflowResponseDtoSteps {
	typ := WorkflowResponseDtoStepsTypePush

	typStr := StepTypeEnum(typ)
	push.Type = typStr

	return WorkflowResponseDtoSteps{
		PushStepResponseDto: &push,
		Type:                typ,
	}
}

func CreateWorkflowResponseDtoStepsChat(chat ChatStepResponseDto) WorkflowResponseDtoSteps {
	typ := WorkflowResponseDtoStepsTypeChat

	typStr := StepTypeEnum(typ)
	chat.Type = typStr

	return WorkflowResponseDtoSteps{
		ChatStepResponseDto: &chat,
		Type:                typ,
	}
}

func CreateWorkflowResponseDtoStepsDelay(delay DelayStepResponseDto) WorkflowResponseDtoSteps {
	typ := WorkflowResponseDtoStepsTypeDelay

	typStr := StepTypeEnum(typ)
	delay.Type = typStr

	return WorkflowResponseDtoSteps{
		DelayStepResponseDto: &delay,
		Type:                 typ,
	}
}

func CreateWorkflowResponseDtoStepsDigest(digest DigestStepResponseDto) WorkflowResponseDtoSteps {
	typ := WorkflowResponseDtoStepsTypeDigest

	typStr := StepTypeEnum(typ)
	digest.Type = typStr

	return WorkflowResponseDtoSteps{
		DigestStepResponseDto: &digest,
		Type:                  typ,
	}
}

func CreateWorkflowResponseDtoStepsCustom(custom CustomStepResponseDto) WorkflowResponseDtoSteps {
	typ := WorkflowResponseDtoStepsTypeCustom

	typStr := StepTypeEnum(typ)
	custom.Type = typStr

	return WorkflowResponseDtoSteps{
		CustomStepResponseDto: &custom,
		Type:                  typ,
	}
}

func CreateWorkflowResponseDtoStepsThrottle(throttle ThrottleStepResponseDto) WorkflowResponseDtoSteps {
	typ := WorkflowResponseDtoStepsTypeThrottle

	typStr := StepTypeEnum(typ)
	throttle.Type = typStr

	return WorkflowResponseDtoSteps{
		ThrottleStepResponseDto: &throttle,
		Type:                    typ,
	}
}

func (u *WorkflowResponseDtoSteps) UnmarshalJSON(data []byte) error {

	type discriminator struct {
		Type string `json:"type"`
	}

	dis := new(discriminator)
	if err := json.Unmarshal(data, &dis); err != nil {
		return fmt.Errorf("could not unmarshal discriminator: %w", err)
	}

	switch dis.Type {
	case "in_app":
		inAppStepResponseDto := new(InAppStepResponseDto)
		if err := utils.UnmarshalJSON(data, &inAppStepResponseDto, "", true, nil); err != nil {
			return fmt.Errorf("could not unmarshal `%s` into expected (Type == in_app) type InAppStepResponseDto within WorkflowResponseDtoSteps: %w", string(data), err)
		}

		u.InAppStepResponseDto = inAppStepResponseDto
		u.Type = WorkflowResponseDtoStepsTypeInApp
		return nil
	case "email":
		emailStepResponseDto := new(EmailStepResponseDto)
		if err := utils.UnmarshalJSON(data, &emailStepResponseDto, "", true, nil); err != nil {
			return fmt.Errorf("could not unmarshal `%s` into expected (Type == email) type EmailStepResponseDto within WorkflowResponseDtoSteps: %w", string(data), err)
		}

		u.EmailStepResponseDto = emailStepResponseDto
		u.Type = WorkflowResponseDtoStepsTypeEmail
		return nil
	case "sms":
		smsStepResponseDto := new(SmsStepResponseDto)
		if err := utils.UnmarshalJSON(data, &smsStepResponseDto, "", true, nil); err != nil {
			return fmt.Errorf("could not unmarshal `%s` into expected (Type == sms) type SmsStepResponseDto within WorkflowResponseDtoSteps: %w", string(data), err)
		}

		u.SmsStepResponseDto = smsStepResponseDto
		u.Type = WorkflowResponseDtoStepsTypeSms
		return nil
	case "push":
		pushStepResponseDto := new(PushStepResponseDto)
		if err := utils.UnmarshalJSON(data, &pushStepResponseDto, "", true, nil); err != nil {
			return fmt.Errorf("could not unmarshal `%s` into expected (Type == push) type PushStepResponseDto within WorkflowResponseDtoSteps: %w", string(data), err)
		}

		u.PushStepResponseDto = pushStepResponseDto
		u.Type = WorkflowResponseDtoStepsTypePush
		return nil
	case "chat":
		chatStepResponseDto := new(ChatStepResponseDto)
		if err := utils.UnmarshalJSON(data, &chatStepResponseDto, "", true, nil); err != nil {
			return fmt.Errorf("could not unmarshal `%s` into expected (Type == chat) type ChatStepResponseDto within WorkflowResponseDtoSteps: %w", string(data), err)
		}

		u.ChatStepResponseDto = chatStepResponseDto
		u.Type = WorkflowResponseDtoStepsTypeChat
		return nil
	case "delay":
		delayStepResponseDto := new(DelayStepResponseDto)
		if err := utils.UnmarshalJSON(data, &delayStepResponseDto, "", true, nil); err != nil {
			return fmt.Errorf("could not unmarshal `%s` into expected (Type == delay) type DelayStepResponseDto within WorkflowResponseDtoSteps: %w", string(data), err)
		}

		u.DelayStepResponseDto = delayStepResponseDto
		u.Type = WorkflowResponseDtoStepsTypeDelay
		return nil
	case "digest":
		digestStepResponseDto := new(DigestStepResponseDto)
		if err := utils.UnmarshalJSON(data, &digestStepResponseDto, "", true, nil); err != nil {
			return fmt.Errorf("could not unmarshal `%s` into expected (Type == digest) type DigestStepResponseDto within WorkflowResponseDtoSteps: %w", string(data), err)
		}

		u.DigestStepResponseDto = digestStepResponseDto
		u.Type = WorkflowResponseDtoStepsTypeDigest
		return nil
	case "custom":
		customStepResponseDto := new(CustomStepResponseDto)
		if err := utils.UnmarshalJSON(data, &customStepResponseDto, "", true, nil); err != nil {
			return fmt.Errorf("could not unmarshal `%s` into expected (Type == custom) type CustomStepResponseDto within WorkflowResponseDtoSteps: %w", string(data), err)
		}

		u.CustomStepResponseDto = customStepResponseDto
		u.Type = WorkflowResponseDtoStepsTypeCustom
		return nil
	case "throttle":
		throttleStepResponseDto := new(ThrottleStepResponseDto)
		if err := utils.UnmarshalJSON(data, &throttleStepResponseDto, "", true, nil); err != nil {
			return fmt.Errorf("could not unmarshal `%s` into expected (Type == throttle) type ThrottleStepResponseDto within WorkflowResponseDtoSteps: %w", string(data), err)
		}

		u.ThrottleStepResponseDto = throttleStepResponseDto
		u.Type = WorkflowResponseDtoStepsTypeThrottle
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for WorkflowResponseDtoSteps", string(data))
}

func (u WorkflowResponseDtoSteps) MarshalJSON() ([]byte, error) {
	if u.InAppStepResponseDto != nil {
		return utils.MarshalJSON(u.InAppStepResponseDto, "", true)
	}

	if u.EmailStepResponseDto != nil {
		return utils.MarshalJSON(u.EmailStepResponseDto, "", true)
	}

	if u.SmsStepResponseDto != nil {
		return utils.MarshalJSON(u.SmsStepResponseDto, "", true)
	}

	if u.PushStepResponseDto != nil {
		return utils.MarshalJSON(u.PushStepResponseDto, "", true)
	}

	if u.ChatStepResponseDto != nil {
		return utils.MarshalJSON(u.ChatStepResponseDto, "", true)
	}

	if u.DelayStepResponseDto != nil {
		return utils.MarshalJSON(u.DelayStepResponseDto, "", true)
	}

	if u.DigestStepResponseDto != nil {
		return utils.MarshalJSON(u.DigestStepResponseDto, "", true)
	}

	if u.CustomStepResponseDto != nil {
		return utils.MarshalJSON(u.CustomStepResponseDto, "", true)
	}

	if u.ThrottleStepResponseDto != nil {
		return utils.MarshalJSON(u.ThrottleStepResponseDto, "", true)
	}

	return nil, errors.New("could not marshal union type WorkflowResponseDtoSteps: all fields are null")
}

type WorkflowResponseDto struct {
	// Name of the workflow
	Name string `json:"name"`
	// Description of the workflow
	Description *string `json:"description,omitempty"`
	// Tags associated with the workflow
	Tags []string `json:"tags,omitempty"`
	// Whether the workflow is active
	Active *bool `default:"false" json:"active"`
	// Enable or disable payload schema validation
	ValidatePayload *bool `json:"validatePayload,omitempty"`
	// The payload JSON Schema for the workflow
	PayloadSchema map[string]any `json:"payloadSchema,omitempty"`
	// Enable or disable translations for this workflow
	IsTranslationEnabled *bool `default:"false" json:"isTranslationEnabled"`
	// Database identifier of the workflow
	ID string `json:"_id"`
	// Workflow identifier
	WorkflowID string `json:"workflowId"`
	// Slug of the workflow
	Slug string `json:"slug"`
	// Last updated timestamp
	UpdatedAt string `json:"updatedAt"`
	// Creation timestamp
	CreatedAt string `json:"createdAt"`
	// User who last updated the workflow
	UpdatedBy *WorkflowResponseDtoUpdatedBy `json:"updatedBy,omitempty"`
	// Timestamp of the last workflow publication
	LastPublishedAt *string `json:"lastPublishedAt,omitempty"`
	// User who last published the workflow
	LastPublishedBy *LastPublishedBy `json:"lastPublishedBy,omitempty"`
	// Steps of the workflow
	Steps []WorkflowResponseDtoSteps `json:"steps"`
	// Origin of the layout
	Origin ResourceOriginEnum `json:"origin"`
	// Preferences for the workflow
	Preferences WorkflowPreferencesResponseDto `json:"preferences"`
	// Status of the workflow
	Status WorkflowStatusEnum `json:"status"`
	// Runtime issues for workflow creation and update
	Issues map[string]RuntimeIssueDto `json:"issues,omitempty"`
	// Timestamp of the last workflow trigger
	LastTriggeredAt *string `json:"lastTriggeredAt,omitempty"`
	// Generated payload example based on the payload schema
	PayloadExample map[string]any `json:"payloadExample,omitempty"`
	// Severity of the workflow
	Severity SeverityLevelEnum `json:"severity"`
}

func (w WorkflowResponseDto) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(w, "", false)
}

func (w *WorkflowResponseDto) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &w, "", false, []string{"name", "_id", "workflowId", "slug", "updatedAt", "createdAt", "steps", "origin", "preferences", "status", "severity"}); err != nil {
		return err
	}
	return nil
}

func (w *WorkflowResponseDto) GetName() string {
	if w == nil {
		return ""
	}
	return w.Name
}

func (w *WorkflowResponseDto) GetDescription() *string {
	if w == nil {
		return nil
	}
	return w.Description
}

func (w *WorkflowResponseDto) GetTags() []string {
	if w == nil {
		return nil
	}
	return w.Tags
}

func (w *WorkflowResponseDto) GetActive() *bool {
	if w == nil {
		return nil
	}
	return w.Active
}

func (w *WorkflowResponseDto) GetValidatePayload() *bool {
	if w == nil {
		return nil
	}
	return w.ValidatePayload
}

func (w *WorkflowResponseDto) GetPayloadSchema() map[string]any {
	if w == nil {
		return nil
	}
	return w.PayloadSchema
}

func (w *WorkflowResponseDto) GetIsTranslationEnabled() *bool {
	if w == nil {
		return nil
	}
	return w.IsTranslationEnabled
}

func (w *WorkflowResponseDto) GetID() string {
	if w == nil {
		return ""
	}
	return w.ID
}

func (w *WorkflowResponseDto) GetWorkflowID() string {
	if w == nil {
		return ""
	}
	return w.WorkflowID
}

func (w *WorkflowResponseDto) GetSlug() string {
	if w == nil {
		return ""
	}
	return w.Slug
}

func (w *WorkflowResponseDto) GetUpdatedAt() string {
	if w == nil {
		return ""
	}
	return w.UpdatedAt
}

func (w *WorkflowResponseDto) GetCreatedAt() string {
	if w == nil {
		return ""
	}
	return w.CreatedAt
}

func (w *WorkflowResponseDto) GetUpdatedBy() *WorkflowResponseDtoUpdatedBy {
	if w == nil {
		return nil
	}
	return w.UpdatedBy
}

func (w *WorkflowResponseDto) GetLastPublishedAt() *string {
	if w == nil {
		return nil
	}
	return w.LastPublishedAt
}

func (w *WorkflowResponseDto) GetLastPublishedBy() *LastPublishedBy {
	if w == nil {
		return nil
	}
	return w.LastPublishedBy
}

func (w *WorkflowResponseDto) GetSteps() []WorkflowResponseDtoSteps {
	if w == nil {
		return []WorkflowResponseDtoSteps{}
	}
	return w.Steps
}

func (w *WorkflowResponseDto) GetOrigin() ResourceOriginEnum {
	if w == nil {
		return ResourceOriginEnum("")
	}
	return w.Origin
}

func (w *WorkflowResponseDto) GetPreferences() WorkflowPreferencesResponseDto {
	if w == nil {
		return WorkflowPreferencesResponseDto{}
	}
	return w.Preferences
}

func (w *WorkflowResponseDto) GetStatus() WorkflowStatusEnum {
	if w == nil {
		return WorkflowStatusEnum("")
	}
	return w.Status
}

func (w *WorkflowResponseDto) GetIssues() map[string]RuntimeIssueDto {
	if w == nil {
		return nil
	}
	return w.Issues
}

func (w *WorkflowResponseDto) GetLastTriggeredAt() *string {
	if w == nil {
		return nil
	}
	return w.LastTriggeredAt
}

func (w *WorkflowResponseDto) GetPayloadExample() map[string]any {
	if w == nil {
		return nil
	}
	return w.PayloadExample
}

func (w *WorkflowResponseDto) GetSeverity() SeverityLevelEnum {
	if w == nil {
		return SeverityLevelEnum("")
	}
	return w.Severity
}
