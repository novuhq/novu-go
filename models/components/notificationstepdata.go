// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"errors"
	"fmt"
	"github.com/novuhq/novu-go/internal/utils"
)

type NotificationStepDataMetadataType string

const (
	NotificationStepDataMetadataTypeDigestRegularMetadata  NotificationStepDataMetadataType = "DigestRegularMetadata"
	NotificationStepDataMetadataTypeDigestTimedMetadata    NotificationStepDataMetadataType = "DigestTimedMetadata"
	NotificationStepDataMetadataTypeDelayRegularMetadata   NotificationStepDataMetadataType = "DelayRegularMetadata"
	NotificationStepDataMetadataTypeDelayScheduledMetadata NotificationStepDataMetadataType = "DelayScheduledMetadata"
)

// NotificationStepDataMetadata - Metadata associated with the workflow step. Can vary based on the type of step.
type NotificationStepDataMetadata struct {
	DigestRegularMetadata  *DigestRegularMetadata  `queryParam:"inline"`
	DigestTimedMetadata    *DigestTimedMetadata    `queryParam:"inline"`
	DelayRegularMetadata   *DelayRegularMetadata   `queryParam:"inline"`
	DelayScheduledMetadata *DelayScheduledMetadata `queryParam:"inline"`

	Type NotificationStepDataMetadataType
}

func CreateNotificationStepDataMetadataDigestRegularMetadata(digestRegularMetadata DigestRegularMetadata) NotificationStepDataMetadata {
	typ := NotificationStepDataMetadataTypeDigestRegularMetadata

	return NotificationStepDataMetadata{
		DigestRegularMetadata: &digestRegularMetadata,
		Type:                  typ,
	}
}

func CreateNotificationStepDataMetadataDigestTimedMetadata(digestTimedMetadata DigestTimedMetadata) NotificationStepDataMetadata {
	typ := NotificationStepDataMetadataTypeDigestTimedMetadata

	return NotificationStepDataMetadata{
		DigestTimedMetadata: &digestTimedMetadata,
		Type:                typ,
	}
}

func CreateNotificationStepDataMetadataDelayRegularMetadata(delayRegularMetadata DelayRegularMetadata) NotificationStepDataMetadata {
	typ := NotificationStepDataMetadataTypeDelayRegularMetadata

	return NotificationStepDataMetadata{
		DelayRegularMetadata: &delayRegularMetadata,
		Type:                 typ,
	}
}

func CreateNotificationStepDataMetadataDelayScheduledMetadata(delayScheduledMetadata DelayScheduledMetadata) NotificationStepDataMetadata {
	typ := NotificationStepDataMetadataTypeDelayScheduledMetadata

	return NotificationStepDataMetadata{
		DelayScheduledMetadata: &delayScheduledMetadata,
		Type:                   typ,
	}
}

func (u *NotificationStepDataMetadata) UnmarshalJSON(data []byte) error {

	var delayScheduledMetadata DelayScheduledMetadata = DelayScheduledMetadata{}
	if err := utils.UnmarshalJSON(data, &delayScheduledMetadata, "", true, true); err == nil {
		u.DelayScheduledMetadata = &delayScheduledMetadata
		u.Type = NotificationStepDataMetadataTypeDelayScheduledMetadata
		return nil
	}

	var delayRegularMetadata DelayRegularMetadata = DelayRegularMetadata{}
	if err := utils.UnmarshalJSON(data, &delayRegularMetadata, "", true, true); err == nil {
		u.DelayRegularMetadata = &delayRegularMetadata
		u.Type = NotificationStepDataMetadataTypeDelayRegularMetadata
		return nil
	}

	var digestTimedMetadata DigestTimedMetadata = DigestTimedMetadata{}
	if err := utils.UnmarshalJSON(data, &digestTimedMetadata, "", true, true); err == nil {
		u.DigestTimedMetadata = &digestTimedMetadata
		u.Type = NotificationStepDataMetadataTypeDigestTimedMetadata
		return nil
	}

	var digestRegularMetadata DigestRegularMetadata = DigestRegularMetadata{}
	if err := utils.UnmarshalJSON(data, &digestRegularMetadata, "", true, true); err == nil {
		u.DigestRegularMetadata = &digestRegularMetadata
		u.Type = NotificationStepDataMetadataTypeDigestRegularMetadata
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for NotificationStepDataMetadata", string(data))
}

func (u NotificationStepDataMetadata) MarshalJSON() ([]byte, error) {
	if u.DigestRegularMetadata != nil {
		return utils.MarshalJSON(u.DigestRegularMetadata, "", true)
	}

	if u.DigestTimedMetadata != nil {
		return utils.MarshalJSON(u.DigestTimedMetadata, "", true)
	}

	if u.DelayRegularMetadata != nil {
		return utils.MarshalJSON(u.DelayRegularMetadata, "", true)
	}

	if u.DelayScheduledMetadata != nil {
		return utils.MarshalJSON(u.DelayScheduledMetadata, "", true)
	}

	return nil, errors.New("could not marshal union type NotificationStepDataMetadata: all fields are null")
}

type NotificationStepData struct {
	// Unique identifier for the notification step.
	ID *string `json:"_id,omitempty"`
	// Universally unique identifier for the notification step.
	UUID *string `json:"uuid,omitempty"`
	// Name of the notification step.
	Name *string `json:"name,omitempty"`
	// ID of the template associated with this notification step.
	TemplateID *string `json:"_templateId,omitempty"`
	// Indicates whether the notification step is active.
	Active *bool `json:"active,omitempty"`
	// Determines if the process should stop on failure.
	ShouldStopOnFail *bool `json:"shouldStopOnFail,omitempty"`
	// Message template used in this notification step.
	Template *MessageTemplate `json:"template,omitempty"`
	// Filters applied to this notification step.
	Filters []StepFilterDto `json:"filters,omitempty"`
	// ID of the parent notification step, if applicable.
	ParentID *string `json:"_parentId,omitempty"`
	// Metadata associated with the workflow step. Can vary based on the type of step.
	Metadata *NotificationStepDataMetadata `json:"metadata,omitempty"`
	// Callback information for replies, including whether it is active and the callback URL.
	ReplyCallback *ReplyCallback `json:"replyCallback,omitempty"`
}

func (o *NotificationStepData) GetID() *string {
	if o == nil {
		return nil
	}
	return o.ID
}

func (o *NotificationStepData) GetUUID() *string {
	if o == nil {
		return nil
	}
	return o.UUID
}

func (o *NotificationStepData) GetName() *string {
	if o == nil {
		return nil
	}
	return o.Name
}

func (o *NotificationStepData) GetTemplateID() *string {
	if o == nil {
		return nil
	}
	return o.TemplateID
}

func (o *NotificationStepData) GetActive() *bool {
	if o == nil {
		return nil
	}
	return o.Active
}

func (o *NotificationStepData) GetShouldStopOnFail() *bool {
	if o == nil {
		return nil
	}
	return o.ShouldStopOnFail
}

func (o *NotificationStepData) GetTemplate() *MessageTemplate {
	if o == nil {
		return nil
	}
	return o.Template
}

func (o *NotificationStepData) GetFilters() []StepFilterDto {
	if o == nil {
		return nil
	}
	return o.Filters
}

func (o *NotificationStepData) GetParentID() *string {
	if o == nil {
		return nil
	}
	return o.ParentID
}

func (o *NotificationStepData) GetMetadata() *NotificationStepDataMetadata {
	if o == nil {
		return nil
	}
	return o.Metadata
}

func (o *NotificationStepData) GetReplyCallback() *ReplyCallback {
	if o == nil {
		return nil
	}
	return o.ReplyCallback
}
