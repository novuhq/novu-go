// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"errors"
	"fmt"
	"github.com/novuhq/novu-go/internal/utils"
)

type NotificationStepDtoMetadataType string

const (
	NotificationStepDtoMetadataTypeDigestRegularMetadata  NotificationStepDtoMetadataType = "DigestRegularMetadata"
	NotificationStepDtoMetadataTypeDigestTimedMetadata    NotificationStepDtoMetadataType = "DigestTimedMetadata"
	NotificationStepDtoMetadataTypeDelayRegularMetadata   NotificationStepDtoMetadataType = "DelayRegularMetadata"
	NotificationStepDtoMetadataTypeDelayScheduledMetadata NotificationStepDtoMetadataType = "DelayScheduledMetadata"
)

// NotificationStepDtoMetadata - Metadata associated with the workflow step. Can vary based on the type of step.
type NotificationStepDtoMetadata struct {
	DigestRegularMetadata  *DigestRegularMetadata  `queryParam:"inline"`
	DigestTimedMetadata    *DigestTimedMetadata    `queryParam:"inline"`
	DelayRegularMetadata   *DelayRegularMetadata   `queryParam:"inline"`
	DelayScheduledMetadata *DelayScheduledMetadata `queryParam:"inline"`

	Type NotificationStepDtoMetadataType
}

func CreateNotificationStepDtoMetadataDigestRegularMetadata(digestRegularMetadata DigestRegularMetadata) NotificationStepDtoMetadata {
	typ := NotificationStepDtoMetadataTypeDigestRegularMetadata

	return NotificationStepDtoMetadata{
		DigestRegularMetadata: &digestRegularMetadata,
		Type:                  typ,
	}
}

func CreateNotificationStepDtoMetadataDigestTimedMetadata(digestTimedMetadata DigestTimedMetadata) NotificationStepDtoMetadata {
	typ := NotificationStepDtoMetadataTypeDigestTimedMetadata

	return NotificationStepDtoMetadata{
		DigestTimedMetadata: &digestTimedMetadata,
		Type:                typ,
	}
}

func CreateNotificationStepDtoMetadataDelayRegularMetadata(delayRegularMetadata DelayRegularMetadata) NotificationStepDtoMetadata {
	typ := NotificationStepDtoMetadataTypeDelayRegularMetadata

	return NotificationStepDtoMetadata{
		DelayRegularMetadata: &delayRegularMetadata,
		Type:                 typ,
	}
}

func CreateNotificationStepDtoMetadataDelayScheduledMetadata(delayScheduledMetadata DelayScheduledMetadata) NotificationStepDtoMetadata {
	typ := NotificationStepDtoMetadataTypeDelayScheduledMetadata

	return NotificationStepDtoMetadata{
		DelayScheduledMetadata: &delayScheduledMetadata,
		Type:                   typ,
	}
}

func (u *NotificationStepDtoMetadata) UnmarshalJSON(data []byte) error {

	var delayScheduledMetadata DelayScheduledMetadata = DelayScheduledMetadata{}
	if err := utils.UnmarshalJSON(data, &delayScheduledMetadata, "", true, true); err == nil {
		u.DelayScheduledMetadata = &delayScheduledMetadata
		u.Type = NotificationStepDtoMetadataTypeDelayScheduledMetadata
		return nil
	}

	var delayRegularMetadata DelayRegularMetadata = DelayRegularMetadata{}
	if err := utils.UnmarshalJSON(data, &delayRegularMetadata, "", true, true); err == nil {
		u.DelayRegularMetadata = &delayRegularMetadata
		u.Type = NotificationStepDtoMetadataTypeDelayRegularMetadata
		return nil
	}

	var digestTimedMetadata DigestTimedMetadata = DigestTimedMetadata{}
	if err := utils.UnmarshalJSON(data, &digestTimedMetadata, "", true, true); err == nil {
		u.DigestTimedMetadata = &digestTimedMetadata
		u.Type = NotificationStepDtoMetadataTypeDigestTimedMetadata
		return nil
	}

	var digestRegularMetadata DigestRegularMetadata = DigestRegularMetadata{}
	if err := utils.UnmarshalJSON(data, &digestRegularMetadata, "", true, true); err == nil {
		u.DigestRegularMetadata = &digestRegularMetadata
		u.Type = NotificationStepDtoMetadataTypeDigestRegularMetadata
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for NotificationStepDtoMetadata", string(data))
}

func (u NotificationStepDtoMetadata) MarshalJSON() ([]byte, error) {
	if u.DigestRegularMetadata != nil {
		return utils.MarshalJSON(u.DigestRegularMetadata, "", true)
	}

	if u.DigestTimedMetadata != nil {
		return utils.MarshalJSON(u.DigestTimedMetadata, "", true)
	}

	if u.DelayRegularMetadata != nil {
		return utils.MarshalJSON(u.DelayRegularMetadata, "", true)
	}

	if u.DelayScheduledMetadata != nil {
		return utils.MarshalJSON(u.DelayScheduledMetadata, "", true)
	}

	return nil, errors.New("could not marshal union type NotificationStepDtoMetadata: all fields are null")
}

type NotificationStepDto struct {
	// Unique identifier for the notification step.
	ID *string `json:"_id,omitempty"`
	// Universally unique identifier for the notification step.
	UUID *string `json:"uuid,omitempty"`
	// Name of the notification step.
	Name *string `json:"name,omitempty"`
	// ID of the template associated with this notification step.
	TemplateID *string `json:"_templateId,omitempty"`
	// Indicates whether the notification step is active.
	Active *bool `json:"active,omitempty"`
	// Determines if the process should stop on failure.
	ShouldStopOnFail *bool `json:"shouldStopOnFail,omitempty"`
	// Message template used in this notification step.
	Template *MessageTemplate `json:"template,omitempty"`
	// Filters applied to this notification step.
	Filters []StepFilterDto `json:"filters,omitempty"`
	// ID of the parent notification step, if applicable.
	ParentID *string `json:"_parentId,omitempty"`
	// Metadata associated with the workflow step. Can vary based on the type of step.
	Metadata *NotificationStepDtoMetadata `json:"metadata,omitempty"`
	// Callback information for replies, including whether it is active and the callback URL.
	ReplyCallback *ReplyCallback         `json:"replyCallback,omitempty"`
	Variants      []NotificationStepData `json:"variants,omitempty"`
}

func (o *NotificationStepDto) GetID() *string {
	if o == nil {
		return nil
	}
	return o.ID
}

func (o *NotificationStepDto) GetUUID() *string {
	if o == nil {
		return nil
	}
	return o.UUID
}

func (o *NotificationStepDto) GetName() *string {
	if o == nil {
		return nil
	}
	return o.Name
}

func (o *NotificationStepDto) GetTemplateID() *string {
	if o == nil {
		return nil
	}
	return o.TemplateID
}

func (o *NotificationStepDto) GetActive() *bool {
	if o == nil {
		return nil
	}
	return o.Active
}

func (o *NotificationStepDto) GetShouldStopOnFail() *bool {
	if o == nil {
		return nil
	}
	return o.ShouldStopOnFail
}

func (o *NotificationStepDto) GetTemplate() *MessageTemplate {
	if o == nil {
		return nil
	}
	return o.Template
}

func (o *NotificationStepDto) GetFilters() []StepFilterDto {
	if o == nil {
		return nil
	}
	return o.Filters
}

func (o *NotificationStepDto) GetParentID() *string {
	if o == nil {
		return nil
	}
	return o.ParentID
}

func (o *NotificationStepDto) GetMetadata() *NotificationStepDtoMetadata {
	if o == nil {
		return nil
	}
	return o.Metadata
}

func (o *NotificationStepDto) GetReplyCallback() *ReplyCallback {
	if o == nil {
		return nil
	}
	return o.ReplyCallback
}

func (o *NotificationStepDto) GetVariants() []NotificationStepData {
	if o == nil {
		return nil
	}
	return o.Variants
}
